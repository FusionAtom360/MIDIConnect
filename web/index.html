<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MIDI App Prototype</title>
    <script src="vst.js"></script>
    <script src="midi.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>MIDI App Prototype</h1>
    </header>

    <div class="container">
      <div class="controls-container">
        <div class="checkbox-container">
          <label> <input type="checkbox" id="sendMIDI" /> Send MIDI </label>
          <label>
            <input type="checkbox" id="receiveMIDI" /> Receive MIDI
          </label>
          <label>
            <input type="checkbox" id="chatToggle" /> Message
          </label>
        </div>
        <div class="status-container">
          <div class="status-info">
            <input
              type="text"
              id="username"
              placeholder="User"
              style="width: 100px"
            />
            <span
              id="connectionStatus"
              style="
                font-weight: bold;
                color: red;
                margin-right: 5px;
                margin-left: 5px;
              "
              >Disconnected</span
            >
            <span
              id="connectedUsers"
              style="margin-right: 5px; font-weight: bold"
              >0</span
            >
            <span id="latency" style="font-weight: normal">0ms</span>
          </div>

          <div class="toggle-container">
            <label style="margin-right:0px; font-size: 1em">
                <span title="Lower latency; more inconsistent">Realtime</span>
                <input 
                type="checkbox"
                id="realtimeToggle"
                title="Lower latency; more inconsistent"
                />
            </label>
          </div>
        </div>
      </div>
      <div id="midiSettings" style="display: none">
        <h2>Select MIDI Devices</h2>
        <div id="midiInputDiv" style="display: none; margin-bottom: 10px">
          <label for="midiInputDeviceSelect">Input Device:</label>
          <select id="midiInputDeviceSelect">
            <option value="">Select MIDI Device...</option>
          </select>
        </div>
        <div id="midiOutputDiv" style="display: none">
          <label for="midiOutputDeviceSelect">Output Device:</label>
          <select id="midiOutputDeviceSelect">
            <option value="">Select MIDI Device...</option>
          </select>
          <label style="font-size: 1em">
            <input
              type="checkbox"
              id="loopbackToggle"
              style="margin-top: 10px"
            />
            Loopback
          </label>
          <label style="font-size: 1em">
            <input
              type="checkbox"
              id="virtualPlaybackToggle"
              style="margin-top: 10px"
            />
            <span id="virtualPlaybackText">Virtual Playback</span>
          </label>
          
        </div>
      </div>
      <div class="log-container">
        <h3>MIDI Log</h3>
        <div id="logWindow">
          <div id="logContent" class="log-content"></div>
        </div>
      </div>
    <div class="log-container" id="chatContainer" style="display: none">
      <h3>Message Log</h3>
      <div id="chatWindow" style="display: flex; flex-direction: column; height: 300px; border: 1px solid #ccc; overflow: hidden;">
        <div id="chatContent" class="log-content" style="flex: 1; overflow-y: auto; padding: 10px;"></div>
        <div id="chatInputContainer" style="display: flex; align-items: center; padding: 10px; border-top: 1px solid #ccc;">
        <input
          type="text"
          id="chatInput"
          placeholder="Type your message..."
          style="flex: 1; padding: 5px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px;"
        />
        <button id="sendChatButton" style="padding: 5px 10px; border: none; background-color: #007bff; color: white; border-radius: 4px; cursor: pointer;">Send</button>
        </div>
      </div>
    </div>
    </div>
  </body>
</html>
